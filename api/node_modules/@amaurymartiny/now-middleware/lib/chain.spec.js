"use strict";
// @amaurymartiny/now-middleware
// Copyright (C) 2020 Amaury Martiny
Object.defineProperty(exports, "__esModule", { value: true });
var chain_1 = require("./chain");
describe('chain', function () {
    it('should work', function () {
        // A dummy Express middleware
        function dummyMiddleware(req, _res, next) {
            req.headers.foo = 'foo';
            next();
        }
        // A dummy ZEIT now handler
        function dummyHandler(req, res) {
            expect(req.headers.foo).toBe('foo');
            res.send('bar');
        }
        var req = { headers: {} };
        var res = {
            send: jest.fn()
        };
        chain_1.chain(dummyMiddleware)(dummyHandler)(req, res);
        expect(res.send).toHaveBeenCalledWith('bar');
    });
});
